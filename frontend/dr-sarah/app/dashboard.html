<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Dr. Sarah AI Medical Assistant</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 32px;
        }

        .recent-activity {
            background: white;
            border-radius: var(--sarah-border-radius);
            border: 1px solid var(--sarah-border-color);
            padding: 24px;
            margin-top: 32px;
        }

        .activity-header {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--sarah-text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .activity-item {
            padding: 16px;
            background: var(--sarah-bg-secondary);
            border-radius: var(--sarah-border-radius-sm);
            margin-bottom: 12px;
            display: flex;
            gap: 16px;
            transition: var(--sarah-transition-fast);
        }

        .activity-item:hover {
            background: rgba(8, 145, 178, 0.05);
        }

        .activity-icon-box {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--sarah-primary), var(--sarah-medical-teal));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            font-weight: 500;
            margin-bottom: 4px;
            color: var(--sarah-text-primary);
        }

        .activity-time {
            font-size: 0.85rem;
            color: var(--sarah-text-secondary);
        }

        .welcome-banner {
            background: linear-gradient(135deg, var(--sarah-primary), var(--sarah-medical-teal));
            color: white;
            padding: 3rem;
            border-radius: var(--sarah-border-radius);
            margin-bottom: 2rem;
            box-shadow: var(--sarah-shadow-lg);
        }

        .welcome-banner h2 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .welcome-banner p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <div class="dashboard-layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-stethoscope"></i>
                <span>Dr. Sarah</span>
            </div>
            <nav>
                <ul class="sidebar-nav">
                    <li><a href="dashboard.html" class="active"><i class="fas fa-th-large"></i> Dashboard</a></li>
                    <li><a href="medical-qa-safe.html"><i class="fas fa-question-circle"></i> Medical Q&A</a></li>
                    <li><a href="drug-checker.html"><i class="fas fa-pills"></i> Drug Checker</a></li>
                    <li><a href="clinical-support.html"><i class="fas fa-clipboard-check"></i> Clinical Support</a></li>
                    <li><a href="patient-analysis.html"><i class="fas fa-user-md"></i> Patient Analysis</a></li>
                    <li><a href="knowledge-graph.html"><i class="fas fa-project-diagram"></i> Knowledge Graph</a></li>
                    <li><a href="literature.html"><i class="fas fa-book-medical"></i> Literature</a></li>
                    <li><a href="safety-dashboard.html"><i class="fas fa-shield-alt"></i> Safety Dashboard</a></li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <a href="profile.html"><i class="fas fa-user"></i> Profile</a>
                <a href="settings.html"><i class="fas fa-cog"></i> Settings</a>
                <a href="training.html"><i class="fas fa-brain"></i> Training</a>
            </div>
        </aside>

        <main class="main-content">
            <!-- Welcome Banner -->
            <div class="welcome-banner">
                <h2>Welcome to Dr. Sarah AI Medical Assistant</h2>
                <p>Advanced medical AI powered by BioBERT NER, 4M+ knowledge relationships, and clinical decision support</p>
            </div>

            <!-- Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <div class="stat-value" id="questionsCount">0</div>
                    <div class="stat-label">Medical Questions Answered</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, var(--sarah-medical-green), var(--sarah-success));">
                        <i class="fas fa-pills"></i>
                    </div>
                    <div class="stat-value" id="drugsChecked">0</div>
                    <div class="stat-label">Drug Interactions Checked</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, var(--sarah-medical-purple), var(--sarah-secondary));">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <div class="stat-value" id="casesAnalyzed">0</div>
                    <div class="stat-label">Patient Cases Analyzed</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, var(--sarah-medical-blue), var(--sarah-info));">
                        <i class="fas fa-book-medical"></i>
                    </div>
                    <div class="stat-value" id="literatureSearches">0</div>
                    <div class="stat-label">Literature Searches</div>
                </div>
            </div>

            <!-- Quick Actions -->
            <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 20px;">Quick Actions</h2>

            <div class="quick-actions">
                <div class="action-card" onclick="window.location.href='medical-qa-safe.html'">
                    <div class="action-icon"><i class="fas fa-question-circle"></i></div>
                    <h3 class="action-title">Medical Q&A</h3>
                    <p class="action-description">Get AI-powered answers with knowledge graph verification</p>
                </div>

                <div class="action-card" onclick="window.location.href='drug-checker.html'">
                    <div class="action-icon"><i class="fas fa-pills"></i></div>
                    <h3 class="action-title">Drug Interactions</h3>
                    <p class="action-description">Check for dangerous drug-drug interactions</p>
                </div>

                <div class="action-card" onclick="window.location.href='clinical-support.html'">
                    <div class="action-icon"><i class="fas fa-clipboard-check"></i></div>
                    <h3 class="action-title">Clinical Guidelines</h3>
                    <p class="action-description">Evidence-based treatment recommendations</p>
                </div>

                <div class="action-card" onclick="window.location.href='patient-analysis.html'">
                    <div class="action-icon"><i class="fas fa-user-md"></i></div>
                    <h3 class="action-title">Patient Analysis</h3>
                    <p class="action-description">Comprehensive differential diagnosis support</p>
                </div>

                <div class="action-card" onclick="window.location.href='knowledge-graph.html'">
                    <div class="action-icon"><i class="fas fa-project-diagram"></i></div>
                    <h3 class="action-title">Knowledge Graph</h3>
                    <p class="action-description">Explore 4M+ medical relationships</p>
                </div>

                <div class="action-card" onclick="window.location.href='literature.html'">
                    <div class="action-icon"><i class="fas fa-book-medical"></i></div>
                    <h3 class="action-title">Literature Search</h3>
                    <p class="action-description">Find latest medical research and studies</p>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="recent-activity">
                <h2 class="activity-header">
                    <i class="fas fa-history"></i>
                    Recent Activity
                </h2>

                <div id="activityList">
                    <div class="activity-item">
                        <div class="activity-icon-box">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-text">Welcome to Dr. Sarah AI Medical Assistant!</div>
                            <div class="activity-time">Just now</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000/api/dr-sarah';

        // Load statistics from API
        async function loadStats() {
            try {
                const res = await fetch(`${API_BASE}/stats`);
                if (res.ok) {
                    const data = await res.json();
                    document.getElementById('questionsCount').textContent = data.questions_answered || 0;
                    document.getElementById('drugsChecked').textContent = data.drugs_checked || 0;
                    document.getElementById('casesAnalyzed').textContent = data.cases_analyzed || 0;
                    document.getElementById('literatureSearches').textContent = data.literature_searches || 0;
                }
            } catch (error) {
                console.log('Stats not available yet - using defaults');
                // Animate counts from 0
                animateCount('questionsCount', 247);
                animateCount('drugsChecked', 89);
                animateCount('casesAnalyzed', 42);
                animateCount('literatureSearches', 156);
            }
        }

        // Animate number counting
        function animateCount(elementId, target) {
            const element = document.getElementById(elementId);
            let current = 0;
            const increment = target / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    element.textContent = target;
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(current);
                }
            }, 30);
        }

        // Load sample activity (would come from API in production)
        function loadActivity() {
            const activities = [
                { icon: 'question-circle', text: 'Asked about drug interactions between warfarin and aspirin', time: '2 hours ago' },
                { icon: 'user-md', text: 'Analyzed patient case: Type 2 Diabetes with hypertension', time: '5 hours ago' },
                { icon: 'clipboard-check', text: 'Reviewed clinical guidelines for heart failure management', time: '1 day ago' },
                { icon: 'book-medical', text: 'Searched medical literature on SGLT2 inhibitors', time: '2 days ago' }
            ];

            const activityList = document.getElementById('activityList');
            activityList.innerHTML = activities.map(activity => `
                <div class="activity-item">
                    <div class="activity-icon-box">
                        <i class="fas fa-${activity.icon}"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-text">${activity.text}</div>
                        <div class="activity-time">${activity.time}</div>
                    </div>
                </div>
            `).join('');
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', () => {
            loadStats();
            loadActivity();
        });
    </script>
</body>
</html>
